<h1>Heatmap المحافظات (تفاعلي + Offline)</h1><div id='filters'></div><div class='card'><div class='small'>تظهر خريطة Leaflet عند توفر CDN — وإلا يستخدم وضع SVG حراري.</div><div id='mapwrap' class='mapwrap'><div id='map' style='height:100%'></div></div></div><div class='card'><table class='table'><thead><tr><th>المحافظة</th><th>مؤشر كثافة</th></tr></thead><tbody id='rows'></tbody></table></div><link rel='stylesheet' href='https://unpkg.com/leaflet@1.9.4/dist/leaflet.css'/><script src='https://unpkg.com/leaflet@1.9.4/dist/leaflet.js'></script><script src='https://unpkg.com/leaflet.heat/dist/leaflet-heat.js'></script><script>window.pageBoot = function(){  var f = UI.makeFilters('filters'); f.onApply(function(){ location.reload(); });  document.getElementById('rows').innerHTML = Mock.governorates().map(function(g){ return `<tr><td>${g}</td><td>${(Math.random()*100).toFixed(1)}</td></tr>`; }).join('');  var fallback = function(){ document.getElementById('map').outerHTML = `<div><svg class="svg" viewBox="0 0 760 320"><rect x="20.0" y="20.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="65.0" y="20.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="110.0" y="20.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="155.0" y="20.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="200.0" y="20.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="245.0" y="20.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="290.0" y="20.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="335.0" y="20.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="380.0" y="20.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="425.0" y="20.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="470.0" y="20.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="515.0" y="20.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="560.0" y="20.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="605.0" y="20.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="650.0" y="20.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="695.0" y="20.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="20.0" y="48.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="65.0" y="48.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="110.0" y="48.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="155.0" y="48.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="200.0" y="48.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="245.0" y="48.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="290.0" y="48.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="335.0" y="48.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="380.0" y="48.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="425.0" y="48.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="470.0" y="48.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="515.0" y="48.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="560.0" y="48.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="605.0" y="48.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="650.0" y="48.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="695.0" y="48.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="20.0" y="76.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="65.0" y="76.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="110.0" y="76.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="155.0" y="76.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="200.0" y="76.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="245.0" y="76.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="290.0" y="76.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="335.0" y="76.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="380.0" y="76.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="425.0" y="76.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="470.0" y="76.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="515.0" y="76.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="560.0" y="76.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="605.0" y="76.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="650.0" y="76.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="695.0" y="76.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="20.0" y="104.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="65.0" y="104.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="110.0" y="104.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="155.0" y="104.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="200.0" y="104.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="245.0" y="104.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="290.0" y="104.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="335.0" y="104.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="380.0" y="104.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="425.0" y="104.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="470.0" y="104.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="515.0" y="104.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="560.0" y="104.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="605.0" y="104.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="650.0" y="104.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="695.0" y="104.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="20.0" y="132.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="65.0" y="132.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="110.0" y="132.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="155.0" y="132.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="200.0" y="132.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="245.0" y="132.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="290.0" y="132.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="335.0" y="132.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="380.0" y="132.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="425.0" y="132.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="470.0" y="132.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="515.0" y="132.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="560.0" y="132.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="605.0" y="132.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="650.0" y="132.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="695.0" y="132.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="20.0" y="160.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="65.0" y="160.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="110.0" y="160.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="155.0" y="160.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="200.0" y="160.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="245.0" y="160.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="290.0" y="160.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="335.0" y="160.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="380.0" y="160.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="425.0" y="160.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="470.0" y="160.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="515.0" y="160.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="560.0" y="160.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="605.0" y="160.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="650.0" y="160.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="695.0" y="160.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="20.0" y="188.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="65.0" y="188.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="110.0" y="188.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="155.0" y="188.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="200.0" y="188.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="245.0" y="188.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="290.0" y="188.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="335.0" y="188.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="380.0" y="188.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="425.0" y="188.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="470.0" y="188.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="515.0" y="188.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="560.0" y="188.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="605.0" y="188.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="650.0" y="188.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="695.0" y="188.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="20.0" y="216.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="65.0" y="216.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="110.0" y="216.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="155.0" y="216.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="200.0" y="216.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="245.0" y="216.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="290.0" y="216.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="335.0" y="216.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="380.0" y="216.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="425.0" y="216.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="470.0" y="216.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="515.0" y="216.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="560.0" y="216.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="605.0" y="216.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="650.0" y="216.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="695.0" y="216.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="20.0" y="244.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="65.0" y="244.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="110.0" y="244.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="155.0" y="244.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="200.0" y="244.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="245.0" y="244.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="290.0" y="244.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="335.0" y="244.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="380.0" y="244.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="425.0" y="244.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="470.0" y="244.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="515.0" y="244.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="560.0" y="244.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="605.0" y="244.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="650.0" y="244.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="695.0" y="244.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="20.0" y="272.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="65.0" y="272.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="110.0" y="272.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="155.0" y="272.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="200.0" y="272.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="245.0" y="272.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/><rect x="290.0" y="272.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="335.0" y="272.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="380.0" y="272.0" width="42.0" height="25.0" fill="#e43d50" rx="3"/><rect x="425.0" y="272.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="470.0" y="272.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="515.0" y="272.0" width="42.0" height="25.0" fill="#ef7885" rx="3"/><rect x="560.0" y="272.0" width="42.0" height="25.0" fill="#c81e36" rx="3"/><rect x="605.0" y="272.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="650.0" y="272.0" width="42.0" height="25.0" fill="#fee5e7" rx="3"/><rect x="695.0" y="272.0" width="42.0" height="25.0" fill="#f9b3bb" rx="3"/></svg></div>`; };  try{    var map = L.map('map',{center:[30.1,31.2], zoom:6, zoomControl:true});    var pts = Mock.govHeatPoints();    L.heatLayer(pts, {radius:20, blur:18, maxZoom:10}).addTo(map);  }catch(e){ fallback(); }};</script>